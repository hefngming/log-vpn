{
  "query": "-- 添加新字段到 nodes 表\nALTER TABLE nodes \nADD COLUMN xuiId INT NOT NULL DEFAULT 0 AFTER id,\nADD COLUMN displayName VARCHAR(100) NOT NULL DEFAULT '' AFTER name,\nADD COLUMN encryptedConfig TEXT AFTER port,\nADD COLUMN streamSettings TEXT AFTER settings,\nADD COLUMN lastSyncAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP AFTER sortOrder;\n\n-- 修改 protocol 字段类型\nALTER TABLE nodes MODIFY COLUMN protocol VARCHAR(50) NOT NULL;\n\n-- 修改 country 和 countryCode 为可选\nALTER TABLE nodes MODIFY COLUMN country VARCHAR(50) NULL;\nALTER TABLE nodes MODIFY COLUMN countryCode VARCHAR(10) NULL;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2niMBJFQbqWKXSJ.root --database ik4QKwpUJXHkdpgpXC9yL3 --execute -- 添加新字段到 nodes 表\nALTER TABLE nodes \nADD COLUMN xuiId INT NOT NULL DEFAULT 0 AFTER id,\nADD COLUMN displayName VARCHAR(100) NOT NULL DEFAULT '' AFTER name,\nADD COLUMN encryptedConfig TEXT AFTER port,\nADD COLUMN streamSettings TEXT AFTER settings,\nADD COLUMN lastSyncAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP AFTER sortOrder;\n\n-- 修改 protocol 字段类型\nALTER TABLE nodes MODIFY COLUMN protocol VARCHAR(50) NOT NULL;\n\n-- 修改 country 和 countryCode 为可选\nALTER TABLE nodes MODIFY COLUMN country VARCHAR(50) NULL;\nALTER TABLE nodes MODIFY COLUMN countryCode VARCHAR(10) NULL;",
  "returncode": 1,
  "logs": [
    "ERROR 1060 (42S21) at line 2: Duplicate column name 'xuiId'"
  ]
}