# LogVPN 本地编译测试检查清单

使用此清单确保完整的编译测试流程。

---

## 📋 前置条件检查

### 系统要求
- [ ] Windows 10/11 64位 系统
- [ ] 至少 50 GB 可用磁盘空间
- [ ] 至少 8 GB 内存
- [ ] 稳定的互联网连接

### 软件安装
- [ ] Visual Studio 2022 Community 已安装
  - [ ] 已安装 .NET 桌面开发工作负载
  - [ ] 已安装 .NET Framework 4.8 开发工具
- [ ] .NET Framework 4.8 Runtime 已安装
- [ ] NSIS 3.x 已安装到 `C:\Program Files (x86)\NSIS`
- [ ] Git for Windows 已安装
- [ ] PowerShell 5.0+ 已安装

---

## 🛠️ 环境准备

### Visual Studio 2022 安装
- [ ] 下载 Visual Studio 2022 Community
- [ ] 运行安装程序
- [ ] 选择 .NET 桌面开发工作负载
- [ ] 选择 .NET Framework 4.8 开发工具
- [ ] 完成安装（30-60 分钟）
- [ ] 重启计算机

### .NET Framework 4.8 安装
- [ ] 下载 .NET Framework 4.8 Runtime
- [ ] 运行安装程序
- [ ] 完成安装
- [ ] 重启计算机

### NSIS 安装
- [ ] 下载 NSIS 3.x
- [ ] 运行安装程序
- [ ] 使用默认安装路径
- [ ] 完成安装

### Git 安装
- [ ] 下载 Git for Windows
- [ ] 运行安装程序
- [ ] 使用默认设置
- [ ] 完成安装

---

## 📦 源代码准备

### 工作目录创建
- [ ] 创建 `C:\LogVPN_Build` 目录
- [ ] 验证目录创建成功

### v2rayN 源代码克隆
- [ ] 克隆 v2rayN 仓库：`git clone https://github.com/2dust/v2rayN.git`
- [ ] 切换到 v6.60 版本：`git checkout v6.60`
- [ ] 验证克隆成功（检查 v2rayN.sln 文件）

### LogVPN 定制文件复制
- [ ] 复制 Services 文件夹中的所有 .cs 文件
  - [ ] OAuthLoginService.cs
  - [ ] AutoSubscriptionService.cs
  - [ ] TrafficStatisticsService.cs
  - [ ] EncryptionService.cs
  - [ ] AutoUpdateService.cs
- [ ] 复制 UI 文件夹中的所有 XAML 文件
  - [ ] LoginWindow.xaml
  - [ ] LoginWindow.xaml.cs
  - [ ] UpdateNotificationWindow.xaml
  - [ ] UpdateNotificationWindow.xaml.cs
- [ ] 复制 Config 文件夹中的配置文件
  - [ ] ConfigManager.cs
- [ ] 复制编译脚本
  - [ ] build.ps1
  - [ ] test-build.ps1
- [ ] 复制 NSIS 脚本
  - [ ] LogVPN_Installer_Enhanced.nsi

### 项目结构验证
- [ ] 验证 v2rayN.sln 存在
- [ ] 验证 build.ps1 存在
- [ ] 验证 test-build.ps1 存在
- [ ] 验证 LogVPN_Installer_Enhanced.nsi 存在
- [ ] 验证所有定制文件已复制

---

## 🔨 编译测试

### 环境验证
- [ ] 运行 `.\test-build.ps1 -Action verify`
- [ ] 验证 Visual Studio 2022 Community 已检测
- [ ] 验证 MSBuild 已检测
- [ ] 验证 NSIS 已检测
- [ ] 验证 .NET Framework 4.8 已检测
- [ ] 环境验证通过

### 项目编译
- [ ] 运行 `.\build.ps1 -Action package -Configuration Release -Platform x64`
- [ ] 等待编译完成（预期 10-15 分钟）
- [ ] 检查编译日志中没有错误
- [ ] 验证编译成功消息

### 编译输出检查
- [ ] 运行 `.\test-build.ps1 -Action output`
- [ ] 验证 v2rayN.exe 存在（15-20 MB）
- [ ] 验证 v2rayN.exe.config 存在
- [ ] 验证 v2rayUpgrade.exe 存在（8-10 MB）
- [ ] 验证至少 20 个 DLL 文件存在
- [ ] 输出检查通过

### 安装程序验证
- [ ] 运行 `.\test-build.ps1 -Action installer`
- [ ] 验证 LogVPN_Setup.exe 存在
- [ ] 验证文件大小在 40-50 MB 范围内
- [ ] 记录 MD5 校验和：_____________________
- [ ] 记录 SHA256 校验和：_____________________
- [ ] 安装程序验证通过

---

## ✅ 测试验证

### 安装测试
- [ ] 运行 `.\test-build.ps1 -Action install`
- [ ] 等待安装完成
- [ ] 验证应用已安装到 `C:\Program Files\LogVPN`
- [ ] 验证开始菜单快捷方式已创建
- [ ] 验证桌面快捷方式已创建
- [ ] 安装测试通过

### 完整测试
- [ ] 运行 `.\test-build.ps1 -Action all`
- [ ] 等待所有测试完成（预期 15-20 分钟）
- [ ] 查看生成的 build-test-report.txt
- [ ] 验证所有测试都通过

---

## 🧪 功能测试

### 应用启动测试
- [ ] 双击桌面快捷方式或开始菜单快捷方式
- [ ] 验证应用窗口打开
- [ ] 验证显示登录界面
- [ ] 验证应用响应正常
- [ ] 关闭应用

### 登录功能测试
- [ ] 启动应用
- [ ] 输入测试账号：_____________________
- [ ] 输入测试密码：_____________________
- [ ] 点击登录按钮
- [ ] 验证登录成功
- [ ] 验证显示节点列表
- [ ] 验证自动获取订阅

### 节点连接测试
- [ ] 从节点列表中选择一个节点
- [ ] 点击连接按钮
- [ ] 验证连接状态变为"已连接"
- [ ] 验证显示连接信息（IP、速度等）
- [ ] 等待 30 秒

### 流量统计测试
- [ ] 打开浏览器访问网页
- [ ] 观察应用中的流量统计
- [ ] 验证上传流量显示（> 0）
- [ ] 验证下载流量显示（> 0）
- [ ] 验证流量数据准确

### 设置界面测试
- [ ] 打开应用设置
- [ ] 验证所有设置选项正常显示
- [ ] 修改一个设置选项
- [ ] 验证设置可以保存
- [ ] 关闭并重新打开应用
- [ ] 验证设置已保存

### 断开连接测试
- [ ] 点击断开连接按钮
- [ ] 验证连接状态变为"已断开"
- [ ] 验证流量统计停止更新

### 卸载测试
- [ ] 打开控制面板 → 程序和功能
- [ ] 找到 LogVPN
- [ ] 点击卸载
- [ ] 验证卸载对话框出现
- [ ] 点击确认卸载
- [ ] 验证应用已卸载
- [ ] 验证快捷方式已删除
- [ ] 验证安装目录已删除

---

## 📊 性能测试

### 启动时间测试
- [ ] 记录应用启动前的时间
- [ ] 启动应用
- [ ] 记录应用完全加载的时间
- [ ] 计算启动时间：___________ 秒
- [ ] 验证启动时间 < 5 秒

### 内存使用测试
- [ ] 启动应用
- [ ] 打开任务管理器
- [ ] 记录应用内存使用：___________ MB
- [ ] 验证内存使用 < 200 MB

### 网络速度测试
- [ ] 连接到节点
- [ ] 使用在线速度测试工具
- [ ] 记录下载速度：___________ Mbps
- [ ] 记录上传速度：___________ Mbps
- [ ] 验证速度正常

---

## 🐛 问题记录

### 遇到的问题
问题 1：
- 描述：_____________________________________________
- 解决方案：_____________________________________________
- 状态：[ ] 已解决  [ ] 未解决

问题 2：
- 描述：_____________________________________________
- 解决方案：_____________________________________________
- 状态：[ ] 已解决  [ ] 未解决

问题 3：
- 描述：_____________________________________________
- 解决方案：_____________________________________________
- 状态：[ ] 已解决  [ ] 未解决

---

## 📝 测试总结

### 测试统计
- 总测试项目数：___________
- 通过项目数：___________
- 失败项目数：___________
- 通过率：___________  %

### 整体评价
- [ ] 优秀（所有测试通过，无问题）
- [ ] 良好（大部分测试通过，有轻微问题）
- [ ] 一般（部分测试通过，有重要问题）
- [ ] 需要改进（多个测试失败）

### 备注
_________________________________________________________________
_________________________________________________________________
_________________________________________________________________

---

## ✍️ 签署

测试人员：_____________________  日期：_____________________

审核人员：_____________________  日期：_____________________

---

**测试完成！感谢您的参与。🎉**
