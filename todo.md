# Log VPN 项目 TODO

## 数据库和基础架构
- [x] 配置用户订阅表
- [x] 配置订单表
- [x] 配置节点表
- [x] 配置支付配置表
- [x] 配置系统设置表
- [x] 配置验证码表

## Web 前端
- [x] 深色科技感主题配置
- [x] 首页设计（产品介绍+下载按钮）
- [x] 用户注册/登录页面
- [x] 用户控制台（订阅状态+流量统计）
- [x] 充值页面（收款码占位+易支付预留）
- [x] 客户端下载页面
- [x] 节点列表展示
- [x] 支付弹窗（微信/支付宝收款码）

## 后台管理系统
- [x] 用户列表管理
- [x] 手动激活/延长订阅按钮
- [x] 订单管理
- [x] 节点管理
- [x] 系统设置
- [x] 用户搜索功能

## API 服务
- [x] X-ui API 集成
- [x] 用户认证接口
- [x] 订阅状态验证
- [x] 流量上报接口
- [x] 节点列表接口
- [x] 验证码发送 API
- [x] 密码重置 API
- [x] 密码修改 API

## Electron 桌面客户端
- [x] 大连接按钮
- [x] 国家节点选择
- [x] 实时流量显示
- [x] 连接时长计时器
- [x] 左侧菜单导航
- [x] 与后端 API 联动

## 邮件通知
- [x] SMTP 配置（Gmail）
- [x] 注册验证码发送
- [x] 订阅到期提醒

## 新增功能 - 用户认证增强
- [x] 找回密码功能（邮箱验证码）
- [x] 更改密码功能（邮箱验证码确认）
- [x] 验证码表（5-10分钟有效期）
- [x] 防止恶意重复获取验证码（60秒限制）

## 新增功能 - 支付模块
- [x] 集成微信/支付宝收款码图片
- [x] 支付弹窗设计
- [x] 手机端保存/截图提示
- [x] 抽象支付类（预留易支付接口）
- [x] 支付配置文件说明

## 新增功能 - 后台管理
- [x] 用户搜索功能
- [x] 激活/续费按钮优化
- [x] API 集成实时数据


## 新增功能 - 支付审核闭环
- [x] 支付凭证表 (paymentProofs)
- [x] 凭证上传组件（图片上传）
- [x] 凭证上传 API
- [x] Telegram Bot 通知服务
- [x] 后台审核中心页面
- [x] 截图预览功能
- [x] 一键激活按钮
- [x] 激活确认邮件发送
- [x] 客服 TG 信息展示

## 新增功能 - 前后端握手与节点同步
- [x] 3x-ui API 集成增强（HTTPS 自签名证书支持）
- [x] 后端节点同步 tRPC 端点 (nodes.sync)
- [x] 多协议节点解析（VLESS、Trojan、Shadowsocks、VMess）
- [x] Sing-box 配置生成
- [x] 订阅链接生成（Base64 编码）
- [x] 前端节点列表页面重构
- [x] 节点同步按钮（管理员可见）
- [x] 节点详情显示（地址、端口、协议、加密方式）
- [x] 节点配置下载功能
- [x] 订阅链接复制功能
- [x] 节点搜索和过滤功能
- [x] 单元测试（12 个测试全部通过）
  - [x] syncNodesFromXui 响应结构验证
  - [x] 错误处理验证
  - [x] 节点字段验证
  - [x] Sing-box 配置生成
  - [x] 订阅链接生成
  - [x] 多协议支持（VLESS、Trojan、Shadowsocks、VMess）

## 新增功能 - 套餐配置更新
- [x] 更新数据库套餐配置（只保留免费版和无限尊享版）
- [x] 更新前端套餐展示页面
- [x] 更新后端 API 返回数据
- [x] 测试套餐购买流程

## 新增功能 - 设备指纹识别（防止免费版重复使用）
- [x] 创建设备指纹表（deviceFingerprints）
- [x] 实现设备指纹生成算法（浏览器 + 硬件特征）
- [x] 实现设备指纹验证 API
- [x] 集成指纹检查到免费版激活流程
- [x] 编写单元测试
- [x] 编写集成测试
